jQuery(document).ready(function () {    var fileFrame;    jQuery("#faf-wall-short").live('click', function () {        if (!fileFrame) { // wp.media.frames.fileFrame =            fileFrame = wp.media({                frame: 'post',                //multiple: 'add',                title: jQuery(this).data('uploader_title'),                button: {                    text: jQuery(this).data('uploader_button_text')                }            });        }        fileFrame.on('insert', function () {            var ids         = [];            var selection   = fileFrame.state().get('selection');            selection.map(function (attachment) {                attachment  = attachment.toJSON();                ids.push(attachment.id);            });            // Do something with attachment.id and/or attachment.url here            wp.media.editor.insert('[wall images="' + ids.join(',') + '"]');            // We set multiple to false so only get one image from the uploader            //attachment = fileFrame.state().get('selection').first().toJSON();            // Do something with attachment.id and/or attachment.url here        });        // Finally, open the modal        fileFrame.open();    });});